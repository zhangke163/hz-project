<link href="//vjs.zencdn.net/5.20/video-js.min.css" rel="stylesheet">
<link href="../../style/setVideo.css" rel="stylesheet">
<script src="//vjs.zencdn.net/5.20/video.min.js"></script>
<script src="../../lib/jquery.js"></script>
<div id="videoDiv" class="video-box">
</div>
<script type="text/javascript">
$(function() {
    var rtmp = getUrlParam('rtmp');
    $("#videoDiv").html('<video id="my-player" class="video-js vjs-big-play-centered" controls preload="auto" poster="//pic.58pic.com/58pic/12/42/29/47g58PICkQm.jpg" data-setup="">' +
        '<source src="' + rtmp + '" type="rtmp/flv" /></video>'
    );
    videojs('my-player', {
        autoplay: true
    }, function onPlayerReady() {
        this.play();
        this.on('ended', function() {});
    });
})

function getUrlParam(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
    var r = window.location.search.substr(1).match(reg);
    if (r != null) return unescape(r[2]);
    return null;
}
</script>